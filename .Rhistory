preDM_priority_filtered_multi_forMETA <- preDM_priority_filtered_multi_forMETA %>%
mutate(
log_HR_stroke_F = log(HR_stroke_F),
se_log_HR_stroke_F = (log(UCI_stroke_F) - log(LCI_stroke_F)) / (2*1.96)
) %>%
relocate(log_HR_stroke_F, .after = HR_stroke_F) %>%
relocate(se_log_HR_stroke_F, .after = UCI_stroke_F)
stroke_F_metaresult_multi <- metagen(
studlab = Author,
sort = preDM_priority_filtered_multi_forMETA$duplicate,
TE = log_HR_stroke_F,
seTE = se_log_HR_stroke_F,
data = preDM_priority_filtered_multi_forMETA,
backtransf = T,
sm="HR",
method.tau = "DL",
subgroup = preDM_priority_filtered_multi_forMETA$duplicate
)
#STROKE, men
preDM_priority_filtered_multi_forMETA <- preDM_priority_filtered_multi_forMETA %>%
mutate(
log_HR_stroke_M = log(HR_stroke_M),
se_log_HR_stroke_M = (log(UCI_stroke_M) - log(LCI_stroke_M)) / (2*1.96)
) %>%
relocate(log_HR_stroke_M, .after = HR_stroke_M) %>%
relocate(se_log_HR_stroke_M, .after = UCI_stroke_M)
stroke_M_metaresult_multi <- metagen(
studlab = Author,
sort = preDM_priority_filtered_multi_forMETA$duplicate,
TE = log_HR_stroke_M,
seTE = se_log_HR_stroke_M,
data = preDM_priority_filtered_multi_forMETA,
backtransf = T,
sm="HR",
method.tau = "DL",
subgroup = preDM_priority_filtered_multi_forMETA$duplicate
)
#-------------------
#PUT INTO DATA FRAME
#-------------------
y<-unique(preDM_priority_filtered_multi[,c("Author","duplicate", "def_priority")])
x <- data.frame(
duplicate = mort_F_metaresult_multi$subgroup.levels,
log_HR_mort_F = mort_F_metaresult_multi$TE.fixed.w,
se_log_HR_mort_F = mort_F_metaresult_multi$seTE.fixed.w,
log_HR_mort_M = mort_M_metaresult_multi$TE.fixed.w,
se_log_HR_mort_M = mort_M_metaresult_multi$seTE.fixed.w,
log_HR_cardiomort_F = cardiomort_F_metaresult_multi$TE.fixed.w,
se_log_HR_cardiomort_F = cardiomort_F_metaresult_multi$seTE.fixed.w,
log_HR_cardiomort_M = cardiomort_M_metaresult_multi$TE.fixed.w,
se_log_HR_cardiomort_M = cardiomort_M_metaresult_multi$seTE.fixed.w,
log_HR_CVD_F = CVD_F_metaresult_multi$TE.fixed.w,
se_log_HR_CVD_F = CVD_F_metaresult_multi$seTE.fixed.w,
log_HR_CVD_M = CVD_M_metaresult_multi$TE.fixed.w,
se_log_HR_CVD_M = CVD_M_metaresult_multi$seTE.fixed.w,
log_HR_CHD_F = CHD_F_metaresult_multi$TE.fixed.w,
se_log_HR_CHD_F = CHD_F_metaresult_multi$seTE.fixed.w,
log_HR_CHD_M = CHD_M_metaresult_multi$TE.fixed.w,
se_log_HR_CHD_M = CHD_M_metaresult_multi$seTE.fixed.w,
log_HR_stroke_F = stroke_F_metaresult_multi$TE.fixed.w,
se_log_HR_stroke_F = stroke_F_metaresult_multi$seTE.fixed.w,
log_HR_stroke_M = stroke_M_metaresult_multi$TE.fixed.w,
se_log_HR_stroke_M = stroke_M_metaresult_multi$seTE.fixed.w,
)
source("~/R/preDM_meta/scripts/PreDM_Practice_Aug6.R", echo = TRUE)
x <- data.frame(
duplicate = mort_F_metaresult_multi$subgroup.names,
log_HR_mort_F = mort_F_metaresult_multi$TE.fixed.w,
se_log_HR_mort_F = mort_F_metaresult_multi$seTE.fixed.w,
log_HR_mort_M = mort_M_metaresult_multi$TE.fixed.w,
se_log_HR_mort_M = mort_M_metaresult_multi$seTE.fixed.w,
log_HR_cardiomort_F = cardiomort_F_metaresult_multi$TE.fixed.w,
se_log_HR_cardiomort_F = cardiomort_F_metaresult_multi$seTE.fixed.w,
log_HR_cardiomort_M = cardiomort_M_metaresult_multi$TE.fixed.w,
se_log_HR_cardiomort_M = cardiomort_M_metaresult_multi$seTE.fixed.w,
log_HR_CVD_F = CVD_F_metaresult_multi$TE.fixed.w,
se_log_HR_CVD_F = CVD_F_metaresult_multi$seTE.fixed.w,
log_HR_CVD_M = CVD_M_metaresult_multi$TE.fixed.w,
se_log_HR_CVD_M = CVD_M_metaresult_multi$seTE.fixed.w,
log_HR_CHD_F = CHD_F_metaresult_multi$TE.fixed.w,
se_log_HR_CHD_F = CHD_F_metaresult_multi$seTE.fixed.w,
log_HR_CHD_M = CHD_M_metaresult_multi$TE.fixed.w,
se_log_HR_CHD_M = CHD_M_metaresult_multi$seTE.fixed.w,
log_HR_stroke_F = stroke_F_metaresult_multi$TE.fixed.w,
se_log_HR_stroke_F = stroke_F_metaresult_multi$seTE.fixed.w,
log_HR_stroke_M = stroke_M_metaresult_multi$TE.fixed.w,
se_log_HR_stroke_M = stroke_M_metaresult_multi$seTE.fixed.w,
)
source("~/R/preDM_meta/scripts/PreDM_Practice_Aug6.R", echo = TRUE)
source("~/R/preDM_meta/scripts/PreDM_Practice_Aug6.R", echo = TRUE)
source("~/R/preDM_meta/scripts/PreDM_Practice_Aug6.R", echo = TRUE)
estimates
view(estimates)
#calculate logHRS and SE for all the single ones
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single %>%
select(Author, duplicate, def_priority, HR_mort_F:UCI_mort_M, HR_cardiomort_F:UCI_cardiomort_M, HR_stroke_F:UCI_stroke_M, HR_iscstroke_F:UCI_iscstroke_M,HR_hemstroke_F:UCI_hemstroke_M,HR_CVD_F:UCI_CVD_M,HR_CHD_F:UCI_CHD_M,HR_CKD_F:UCI_CKD_M,HR_HF_F:UCI_HF_M)
#mortality
#Calculate log HR of mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_F = log(HR_mort_F),
se_log_HR_mort_F = (log(UCI_mort_F) - log(LCI_mort_F)) / (2*1.96)
) %>%
relocate(log_HR_mort_F, .after = HR_mort_F) %>%
relocate(se_log_HR_mort_F, .after = UCI_mort_F)
preDM_priority_filtered_single_forMETA<-as.data.frame(preDM_priority_filtered_single_forMETA) # always best to just change to data frame
#MEN
#Calculate log HR of mort HR for women AND SE.
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_M = log(HR_mort_M),
se_log_HR_mort_M = (log(UCI_mort_M) - log(LCI_mort_M)) / (2*1.96)
) %>%
relocate(log_HR_mort_M, .after = HR_mort_M) %>%
relocate(se_log_HR_mort_M, .after = UCI_mort_M)
#cardiomortality
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_F = log(HR_cardiomort_F),
se_log_HR_cardiomort_F = (log(UCI_cardiomort_F) - log(LCI_cardiomort_F)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_F, .after = HR_cardiomort_F) %>%
relocate(se_log_HR_cardiomort_F, .after = UCI_cardiomort_F)
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_M = log(HR_cardiomort_M),
se_log_HR_cardiomort_M = (log(UCI_cardiomort_M) - log(LCI_cardiomort_M)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_M, .after = HR_cardiomort_M) %>%
relocate(se_log_HR_cardiomort_M, .after = UCI_cardiomort_M)
#CVD
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_F = log(HR_CVD_F),
se_log_HR_CVD_F = (log(UCI_CVD_F) - log(LCI_CVD_F)) / (2*1.96)
) %>%
relocate(log_HR_CVD_F, .after = HR_CVD_F) %>%
relocate(se_log_HR_CVD_F, .after = UCI_CVD_F)
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_M = log(HR_CVD_M),
se_log_HR_CVD_M = (log(UCI_CVD_M) - log(LCI_CVD_M)) / (2*1.96)
) %>%
relocate(log_HR_CVD_M, .after = HR_CVD_M) %>%
relocate(se_log_HR_CVD_M, .after = UCI_CVD_M)
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_F = log(HR_CHD_F),
se_log_HR_CHD_F = (log(UCI_CHD_F) - log(LCI_CHD_F)) / (2*1.96)
) %>%
relocate(log_HR_CHD_F, .after = HR_CHD_F) %>%
relocate(se_log_HR_CHD_F, .after = UCI_CHD_F)
#CHD - MEN
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_M = log(HR_CHD_M),
se_log_HR_CHD_M = (log(UCI_CHD_M) - log(LCI_CHD_M)) / (2*1.96)
) %>%
relocate(log_HR_CHD_M, .after = HR_CHD_M) %>%
relocate(se_log_HR_CHD_M, .after = UCI_CHD_M)
#stroke
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_F = log(HR_stroke_F),
se_log_HR_stroke_F = (log(UCI_stroke_F) - log(LCI_stroke_F)) / (2*1.96)
) %>%
relocate(log_HR_stroke_F, .after = HR_stroke_F) %>%
relocate(se_log_HR_stroke_F, .after = UCI_stroke_F)
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_M = log(HR_stroke_M),
se_log_HR_stroke_M = (log(UCI_stroke_M) - log(LCI_stroke_M)) / (2*1.96)
) %>%
relocate(log_HR_stroke_M, .after = HR_stroke_M) %>%
relocate(se_log_HR_stroke_M, .after = UCI_stroke_M)
View(preDM_priority_filtered_single_forMETA)
#calculate logHRS and SE for all the single ones
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single %>%
select(Author, duplicate, def_priority, HR_mort_F:UCI_mort_M, HR_cardiomort_F:UCI_cardiomort_M, HR_stroke_F:UCI_stroke_M, HR_iscstroke_F:UCI_iscstroke_M,HR_hemstroke_F:UCI_hemstroke_M,HR_CVD_F:UCI_CVD_M,HR_CHD_F:UCI_CHD_M,HR_CKD_F:UCI_CKD_M,HR_HF_F:UCI_HF_M)
#mortality
#Calculate log HR of mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_F = log(HR_mort_F),
se_log_HR_mort_F = (log(UCI_mort_F) - log(LCI_mort_F)) / (2*1.96)
) %>%
relocate(log_HR_mort_F, .after = HR_mort_F) %>%
relocate(se_log_HR_mort_F, .after = UCI_mort_F)
preDM_priority_filtered_single_forMETA<-as.data.frame(preDM_priority_filtered_single_forMETA) # always best to just change to data frame
#MEN
#Calculate log HR of mort HR for women AND SE.
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_M = log(HR_mort_M),
se_log_HR_mort_M = (log(UCI_mort_M) - log(LCI_mort_M)) / (2*1.96)
) %>%
relocate(log_HR_mort_M, .after = HR_mort_M) %>%
relocate(se_log_HR_mort_M, .after = UCI_mort_M)
#cardiomortality
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_F = log(HR_cardiomort_F),
se_log_HR_cardiomort_F = (log(UCI_cardiomort_F) - log(LCI_cardiomort_F)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_F, .after = HR_cardiomort_F) %>%
relocate(se_log_HR_cardiomort_F, .after = UCI_cardiomort_F)
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_M = log(HR_cardiomort_M),
se_log_HR_cardiomort_M = (log(UCI_cardiomort_M) - log(LCI_cardiomort_M)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_M, .after = HR_cardiomort_M) %>%
relocate(se_log_HR_cardiomort_M, .after = UCI_cardiomort_M)
#CVD
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_F = log(HR_CVD_F),
se_log_HR_CVD_F = (log(UCI_CVD_F) - log(LCI_CVD_F)) / (2*1.96)
) %>%
relocate(log_HR_CVD_F, .after = HR_CVD_F) %>%
relocate(se_log_HR_CVD_F, .after = UCI_CVD_F)
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_M = log(HR_CVD_M),
se_log_HR_CVD_M = (log(UCI_CVD_M) - log(LCI_CVD_M)) / (2*1.96)
) %>%
relocate(log_HR_CVD_M, .after = HR_CVD_M) %>%
relocate(se_log_HR_CVD_M, .after = UCI_CVD_M)
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_F = log(HR_CHD_F),
se_log_HR_CHD_F = (log(UCI_CHD_F) - log(LCI_CHD_F)) / (2*1.96)
) %>%
relocate(log_HR_CHD_F, .after = HR_CHD_F) %>%
relocate(se_log_HR_CHD_F, .after = UCI_CHD_F)
#CHD - MEN
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_M = log(HR_CHD_M),
se_log_HR_CHD_M = (log(UCI_CHD_M) - log(LCI_CHD_M)) / (2*1.96)
) %>%
relocate(log_HR_CHD_M, .after = HR_CHD_M) %>%
relocate(se_log_HR_CHD_M, .after = UCI_CHD_M)
#stroke
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_F = log(HR_stroke_F),
se_log_HR_stroke_F = (log(UCI_stroke_F) - log(LCI_stroke_F)) / (2*1.96)
) %>%
relocate(log_HR_stroke_F, .after = HR_stroke_F) %>%
relocate(se_log_HR_stroke_F, .after = UCI_stroke_F)
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_M = log(HR_stroke_M),
se_log_HR_stroke_M = (log(UCI_stroke_M) - log(LCI_stroke_M)) / (2*1.96)
) %>%
relocate(log_HR_stroke_M, .after = HR_stroke_M) %>%
relocate(se_log_HR_stroke_M, .after = UCI_stroke_M)
pooled_single <- preDM_priority_filtered_single_forMETA %>%
select(1:3, -starts_with("HR"), -starts_with("LCI"), -starts_with("UCI"))
source("~/R/preDM_meta/scripts/PreDM_Practice_Aug6.R", echo = TRUE)
View(pooled_single)
View(pooled_multi)
View(pooled_single)
View(preDM_priority_filtered_single_forMETA)
View(preDM_priority_filtered_single_forMETA)
#calculate logHRS and SE for all the single ones
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single %>%
select(Author, duplicate, def_priority, HR_mort_F:UCI_mort_M, HR_cardiomort_F:UCI_cardiomort_M, HR_stroke_F:UCI_stroke_M, HR_iscstroke_F:UCI_iscstroke_M,HR_hemstroke_F:UCI_hemstroke_M,HR_CVD_F:UCI_CVD_M,HR_CHD_F:UCI_CHD_M,HR_CKD_F:UCI_CKD_M,HR_HF_F:UCI_HF_M)
#mortality
#Calculate log HR of mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_F = log(HR_mort_F),
se_log_HR_mort_F = (log(UCI_mort_F) - log(LCI_mort_F)) / (2*1.96)
) %>%
relocate(log_HR_mort_F, .after = HR_mort_F) %>%
relocate(se_log_HR_mort_F, .after = UCI_mort_F)
preDM_priority_filtered_single_forMETA<-as.data.frame(preDM_priority_filtered_single_forMETA) # always best to just change to data frame
#MEN
#Calculate log HR of mort HR for women AND SE.
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_M = log(HR_mort_M),
se_log_HR_mort_M = (log(UCI_mort_M) - log(LCI_mort_M)) / (2*1.96)
) %>%
relocate(log_HR_mort_M, .after = HR_mort_M) %>%
relocate(se_log_HR_mort_M, .after = UCI_mort_M)
#cardiomortality
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_F = log(HR_cardiomort_F),
se_log_HR_cardiomort_F = (log(UCI_cardiomort_F) - log(LCI_cardiomort_F)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_F, .after = HR_cardiomort_F) %>%
relocate(se_log_HR_cardiomort_F, .after = UCI_cardiomort_F)
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_M = log(HR_cardiomort_M),
se_log_HR_cardiomort_M = (log(UCI_cardiomort_M) - log(LCI_cardiomort_M)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_M, .after = HR_cardiomort_M) %>%
relocate(se_log_HR_cardiomort_M, .after = UCI_cardiomort_M)
#CVD
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_F = log(HR_CVD_F),
se_log_HR_CVD_F = (log(UCI_CVD_F) - log(LCI_CVD_F)) / (2*1.96)
) %>%
relocate(log_HR_CVD_F, .after = HR_CVD_F) %>%
relocate(se_log_HR_CVD_F, .after = UCI_CVD_F)
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_M = log(HR_CVD_M),
se_log_HR_CVD_M = (log(UCI_CVD_M) - log(LCI_CVD_M)) / (2*1.96)
) %>%
relocate(log_HR_CVD_M, .after = HR_CVD_M) %>%
relocate(se_log_HR_CVD_M, .after = UCI_CVD_M)
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_F = log(HR_CHD_F),
se_log_HR_CHD_F = (log(UCI_CHD_F) - log(LCI_CHD_F)) / (2*1.96)
) %>%
relocate(log_HR_CHD_F, .after = HR_CHD_F) %>%
relocate(se_log_HR_CHD_F, .after = UCI_CHD_F)
#CHD - MEN
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_M = log(HR_CHD_M),
se_log_HR_CHD_M = (log(UCI_CHD_M) - log(LCI_CHD_M)) / (2*1.96)
) %>%
relocate(log_HR_CHD_M, .after = HR_CHD_M) %>%
relocate(se_log_HR_CHD_M, .after = UCI_CHD_M)
#stroke
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_F = log(HR_stroke_F),
se_log_HR_stroke_F = (log(UCI_stroke_F) - log(LCI_stroke_F)) / (2*1.96)
) %>%
relocate(log_HR_stroke_F, .after = HR_stroke_F) %>%
relocate(se_log_HR_stroke_F, .after = UCI_stroke_F)
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_M = log(HR_stroke_M),
se_log_HR_stroke_M = (log(UCI_stroke_M) - log(LCI_stroke_M)) / (2*1.96)
) %>%
relocate(log_HR_stroke_M, .after = HR_stroke_M) %>%
relocate(se_log_HR_stroke_M, .after = UCI_stroke_M)
pooled_single <- preDM_priority_filtered_single_forMETA %>%
select(1:3, -starts_with("HR"), -starts_with("LCI"), -starts_with("UCI"))
View(pooled_single)
View(pooled_single)
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_F = log(HR_mort_F),
se_log_HR_mort_F = (log(UCI_mort_F) - log(LCI_mort_F)) / (2*1.96)
) %>%
relocate(log_HR_mort_F, .after = HR_mort_F) %>%
relocate(se_log_HR_mort_F, .after = UCI_mort_F)
View(preDM_priority_filtered_single_forMETA)
#calculate logHRS and SE for all the single ones
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single %>%
select(Author, duplicate, def_priority, HR_mort_F:UCI_mort_M, HR_cardiomort_F:UCI_cardiomort_M, HR_stroke_F:UCI_stroke_M, HR_iscstroke_F:UCI_iscstroke_M,HR_hemstroke_F:UCI_hemstroke_M,HR_CVD_F:UCI_CVD_M,HR_CHD_F:UCI_CHD_M,HR_CKD_F:UCI_CKD_M,HR_HF_F:UCI_HF_M)
#mortality
#Calculate log HR of mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_F = log(HR_mort_F),
se_log_HR_mort_F = (log(UCI_mort_F) - log(LCI_mort_F)) / (2*1.96)
) %>%
relocate(log_HR_mort_F, .after = HR_mort_F) %>%
relocate(se_log_HR_mort_F, .after = UCI_mort_F)
preDM_priority_filtered_single_forMETA<-as.data.frame(preDM_priority_filtered_single_forMETA) # always best to just change to data frame
#MEN
#Calculate log HR of mort HR for women AND SE.
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_mort_M = log(HR_mort_M),
se_log_HR_mort_M = (log(UCI_mort_M) - log(LCI_mort_M)) / (2*1.96)
) %>%
relocate(log_HR_mort_M, .after = HR_mort_M) %>%
relocate(se_log_HR_mort_M, .after = UCI_mort_M)
#cardiomortality
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_F = log(HR_cardiomort_F),
se_log_HR_cardiomort_F = (log(UCI_cardiomort_F) - log(LCI_cardiomort_F)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_F, .after = HR_cardiomort_F) %>%
relocate(se_log_HR_cardiomort_F, .after = UCI_cardiomort_F)
#Calculate log HR of CVD mort HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_cardiomort_M = log(HR_cardiomort_M),
se_log_HR_cardiomort_M = (log(UCI_cardiomort_M) - log(LCI_cardiomort_M)) / (2*1.96)
) %>%
relocate(log_HR_cardiomort_M, .after = HR_cardiomort_M) %>%
relocate(se_log_HR_cardiomort_M, .after = UCI_cardiomort_M)
#CVD
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_F = log(HR_CVD_F),
se_log_HR_CVD_F = (log(UCI_CVD_F) - log(LCI_CVD_F)) / (2*1.96)
) %>%
relocate(log_HR_CVD_F, .after = HR_CVD_F) %>%
relocate(se_log_HR_CVD_F, .after = UCI_CVD_F)
#Calculate log HR of CVD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CVD_M = log(HR_CVD_M),
se_log_HR_CVD_M = (log(UCI_CVD_M) - log(LCI_CVD_M)) / (2*1.96)
) %>%
relocate(log_HR_CVD_M, .after = HR_CVD_M) %>%
relocate(se_log_HR_CVD_M, .after = UCI_CVD_M)
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_F = log(HR_CHD_F),
se_log_HR_CHD_F = (log(UCI_CHD_F) - log(LCI_CHD_F)) / (2*1.96)
) %>%
relocate(log_HR_CHD_F, .after = HR_CHD_F) %>%
relocate(se_log_HR_CHD_F, .after = UCI_CHD_F)
#CHD - MEN
#Calculate log HR of CHD HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_CHD_M = log(HR_CHD_M),
se_log_HR_CHD_M = (log(UCI_CHD_M) - log(LCI_CHD_M)) / (2*1.96)
) %>%
relocate(log_HR_CHD_M, .after = HR_CHD_M) %>%
relocate(se_log_HR_CHD_M, .after = UCI_CHD_M)
#stroke
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_F = log(HR_stroke_F),
se_log_HR_stroke_F = (log(UCI_stroke_F) - log(LCI_stroke_F)) / (2*1.96)
) %>%
relocate(log_HR_stroke_F, .after = HR_stroke_F) %>%
relocate(se_log_HR_stroke_F, .after = UCI_stroke_F)
#Calculate log HR of STROKE HR for women AND SE so we can use it in the meta analysis
preDM_priority_filtered_single_forMETA <- preDM_priority_filtered_single_forMETA %>%
mutate(
log_HR_stroke_M = log(HR_stroke_M),
se_log_HR_stroke_M = (log(UCI_stroke_M) - log(LCI_stroke_M)) / (2*1.96)
) %>%
relocate(log_HR_stroke_M, .after = HR_stroke_M) %>%
relocate(se_log_HR_stroke_M, .after = UCI_stroke_M)
View(preDM_priority_filtered_single_forMETA)
pooled_single <- preDM_priority_filtered_single_forMETA %>%
select(1:3, -starts_with("HR"), -starts_with("LCI"), -starts_with("UCI"))
View(preDM_priority_filtered_single_forMETA)
View(pooled_single)
View(preDM_priority_filtered_single_forMETA)
pooled_single <- preDM_priority_filtered_single_forMETA %>%
select(1:3, starts_with("se"), starts_with("log"))
View(pooled_single)
View(pooled_multi)
View(pooled_single)
View(pooled_single)
pooled_single <- preDM_priority_filtered_single_forMETA %>%
select(1:3, matches("^(se_|log_)"))
View(pooled_single)
final_table <- bind_rows(pooled_single, pooled_multi)
View(final_table)
source("~/R/preDM_meta/scripts/PreDM_Practice_Aug6.R", echo = TRUE)
CHD_F_metaresult
CHD_M_metaresult
CVD_F_metaresult
CVD_M_metaresult
stroke_F_metaresult
stroke_M_metaresult
mort_F_metaresult
mort_M_metaresult
CHD_F_metaresult
CHD_M_metaresult
F_results <- c(mort_F_metaresult$TE.random, cardiomort_F_metaresult$TE.random, CVD_F_metaresult$TE.random, CHD_F_metaresult$TE.random, stroke_F_metaresult$TE.random)
M_results <- c(mort_M_metaresult$TE.random, cardiomort_M_metaresult$TE.random, CVD_M_metaresult$TE.random, CHD_M_metaresult$TE.random, stroke_M_metaresult$TE.random)
F_results
M_results
F_results <- exp(c(mort_F_metaresult$TE.random, cardiomort_F_metaresult$TE.random, CVD_F_metaresult$TE.random, CHD_F_metaresult$TE.random, stroke_F_metaresult$TE.random))
M_results <- exp(c(mort_M_metaresult$TE.random, cardiomort_M_metaresult$TE.random, CVD_M_metaresult$TE.random, CHD_M_metaresult$TE.random, stroke_M_metaresult$TE.random))
F_results
M_results
diff = F_results/M_results
diff
